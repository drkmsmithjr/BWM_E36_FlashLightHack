Version 4
SHEET 1 1032 736
WIRE 448 -336 64 -336
WIRE 64 -288 64 -336
WIRE 448 -288 448 -336
WIRE 448 -288 336 -288
WIRE 560 -288 448 -288
WIRE 336 -208 336 -288
WIRE 560 -208 560 -288
WIRE 64 -176 64 -208
WIRE 560 -32 560 -128
WIRE 560 -16 560 -32
WIRE 336 16 336 -128
WIRE 464 16 336 16
WIRE 464 48 464 16
WIRE 512 48 464 48
WIRE 464 80 464 48
WIRE 512 80 464 80
WIRE 512 96 512 80
WIRE 432 112 -112 112
WIRE 336 128 336 16
WIRE 336 128 128 128
WIRE 400 128 336 128
WIRE 560 160 560 64
WIRE 560 160 512 160
WIRE 336 192 336 128
WIRE 432 192 432 112
WIRE 560 192 560 160
WIRE 560 192 432 192
WIRE 640 192 560 192
WIRE 128 208 128 128
WIRE 560 208 560 192
WIRE 560 208 528 208
WIRE 96 224 16 224
WIRE 400 224 400 128
WIRE 176 240 160 240
WIRE 272 240 256 240
WIRE 528 240 528 208
WIRE 560 240 560 208
WIRE -112 256 -112 192
WIRE 96 256 -112 256
WIRE -112 288 -112 256
WIRE 16 304 16 224
WIRE 528 320 528 304
WIRE 560 320 560 304
WIRE 560 320 528 320
WIRE 560 336 560 320
WIRE 128 368 128 272
WIRE 128 368 112 368
WIRE 336 384 336 288
WIRE 400 384 400 288
WIRE 400 384 336 384
WIRE -112 416 -112 368
WIRE 16 416 16 384
WIRE 112 416 112 368
WIRE 336 432 336 384
WIRE 560 448 560 416
FLAG 336 432 0
FLAG 16 416 0
FLAG -112 416 0
FLAG 64 -176 0
FLAG 640 192 BAT
FLAG 112 416 0
FLAG 560 448 0
SYMBOL npn 272 192 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL voltage 16 288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName TL431-Vref
SYMATTR Value 2.5
SYMBOL res -128 272 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res -128 96 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 544 -224 R0
SYMATTR InstName R3
SYMATTR Value 620
SYMBOL res 320 -224 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 544 240 R0
SYMATTR InstName Bat
SYMATTR Value 100m
SYMATTR SpiceLine Rpar=10k
SYMBOL voltage 64 -304 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Car_battery}
SYMBOL res 272 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL Opamps\\UniversalOpamp2 128 240 R0
SYMATTR InstName TL431-ErrorAmp
SYMATTR Value2 Avol=1Meg GBW=0.1Meg Slew=1Meg
SYMBOL nmos 512 -32 R0
SYMATTR InstName M1
SYMATTR Value BSS123
SYMBOL zener 528 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BZX84C10L
SYMBOL voltage 560 320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10
SYMATTR InstName V3
SYMATTR Value 1.5
SYMBOL diode 544 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 416 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -25 -8 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
TEXT -56 600 Left 2 !.param Tdel = 10n HYST = .0000001  Car_battery = 12
TEXT -48 560 Left 2 !.model MySwitch2 SW(Ron=7.2 Roff=10Meg Vt=2.5 Vh=.05)
TEXT -48 504 Left 2 !.tran 30
TEXT 632 296 Left 2 ;Battery Equivalent circuit
TEXT 64 472 Left 2 ;TL431 Equivalent circuit
TEXT -48 688 Left 2 ;.step param Car_battery list 12v 40v -12v
TEXT 16 720 Left 2 ;Step load is Nominal Voltage, Load Dump Voltage, and Reverse Voltage
TEXT -48 640 Left 2 !.ic V(BAT) = 1.5
